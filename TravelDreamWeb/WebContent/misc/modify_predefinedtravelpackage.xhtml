<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition template="/master.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets">
	
	
	<ui:define name="title">Travel Package</ui:define>

    <ui:define name="content">
    
 	<h:form>
	            <p:dataTable var="travelComponent" value="#{PredefinedTravelPackageWeb.predTP.travelComponents}">
                <p:column headerText="" style="text-align: center">  
                <p:row>
                	<p:commandButton id="visualize" icon="ui-icon-script"  actionListener="#{PredefinedTravelPackageWeb.showComponent(element)}"/>
                    <p:commandButton id="delete" style="float:center" icon="ui-icon-trash" actionListener="#{PredefinedTravelPackageWeb.deleteComponent(travelComponent)}" />
                    
                </p:row> 
                <p:tooltip for="visualize" value="Visualize the travel component" showEffect="fade" hideEffect="fade" />   
                <p:tooltip for="delete" value="Delete the component from the lsit" showEffect="fade" hideEffect="fade" /> 
                </p:column>  
                 
                 <p:column headerText="Type" style="text-align: center">  
                    <h:outputText value="Flight" rendered="#{travelComponent.type == 'FLIGHT'}"/> 
                    <h:outputText value="Hotel" rendered="#{travelComponent.type == 'HOTEL'}"/> 
                    <h:outputText value="Excursion" rendered="#{travelComponent.type == 'EXCURSION'}"/>  
                </p:column>  
                <p:column headerText="Supplying Company" style="text-align: center">  
                    <h:outputText value="#{travelComponent.supplyingCompany}" />  
                </p:column>  
                <p:column headerText="Availability" style="text-align: center">  
                    <h:outputText value="#{travelComponent.availability}" />  
                </p:column> 
            	</p:dataTable> 
          	

            	<p:commandButton value="Add Travel Component" style="float:center" icon="ui-icon-plusthick" onclick="PF('searchComponent').show();PF('selectComponent').hide()"/>
		</h:form>
		<p:dialog header="Search Travel Components" id="searchComponent" widgetVar="searchComponent" width="700" height="400" resizable="true" showEffect="clip" hideEffect="clip" dynamic="true">  
			<ui:include src="/misc/search/search_travelcomponent_to_add.xhtml" /> 	
		</p:dialog>  
		
		<p:dialog header="Add Travel Component" id="selectComponent" widgetVar="selectComponent" width="700" height="400" resizable="true" showEffect="clip" hideEffect="clip" dynamic="true">  
		<p:ajax event="close" listener="#{PredefinedTravelPackageWeb.onTravelComponentChosen}"/> 
			<h:form>		

		    <ui:include src="/misc/search/add_travelcomponent.xhtml" />  
		 	</h:form>
		 </p:dialog>
		 <h:form>
		 <p:commandButton id="save" value="Save" icon="ui-icon-check" update="growl1" style="float:right;" action="#{PredefinedTravelPackageWeb.save()}"	ajax="false"/>
			<p:tooltip for="save" value="Save the package" showEffect="fade" hideEffect="fade" /> 
		</h:form>
	</ui:define>
</ui:composition>