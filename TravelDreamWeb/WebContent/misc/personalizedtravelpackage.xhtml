<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets">
	<h:form>
		<p:panelGrid style="width:100%">
		<f:facet name="header">
			<p:row>
				<p:column colspan="2" style="width:100%; text-align: center; font-size:30px;">
					<p:inplace id="name" editor="true">
						<p:inputText value="#{PersonalizedTravelPackageWeb.personalizedPackage.name}" label=" " required="true"/>
					</p:inplace>  
				</p:column>			
			</p:row>
			<p:row>
				<p:column style="width:50%; text-align: left">Departure Date</p:column>
				<p:column style="width:100%; text-align: right">Return Date</p:column>
			</p:row>
		</f:facet>
		<p:row>
			<p:column style="width:50%; text-align: left">
				<p:inplace id="Departure_date" editor="true">
					<p:calendar value="#{PersonalizedTravelPackageWeb.departureDate}" pattern="dd-MM-yyyy" showButtonPanel="true" label=" " required="true">
						<f:convertDateTime pattern="dd-MM-yyyy" />
					</p:calendar>
				</p:inplace> 
			</p:column>
			<p:column style="width:100%; text-align: right">
				<p:inplace id="Arrival_date" editor="true">
					<p:calendar value="#{PersonalizedTravelPackageWeb.returnDate}" pattern="dd-MM-yyyy" showButtonPanel="true" label=" " required="true">
						<f:convertDateTime pattern="dd-MM-yyyy" />
					</p:calendar>
				</p:inplace> 
			</p:column>	
		</p:row>			 
		</p:panelGrid>

		<p:growl id="growl" showDetail="true" globalOnly="true" /> 
		
		<p:dataTable id="data" var="element" value="#{PersonalizedTravelPackageWeb.personalizedPackage.travelComponents}">  	
			<p:column headerText="Type">  
                <h:outputText value="#{element.travelComponent.type}" />  
            </p:column>  
			<p:column headerText="Supplyng company">  
                <h:outputText value="#{element.travelComponent.supplyingCompany}" />  
            </p:column>  
           
        	<p:column headerText="Status" style="text-align: center">
				<p:graphicImage id="Confirm" value="/resources/images/confirmed.png" style="float:center" rendered="#{PersonalizedTravelPackageWeb.checkStatus(element)}" />
				<p:tooltip for="Confirm" value="The component is already payed" showEffect="fade" hideEffect="fade" /> 
			 	<p:graphicImage id="Unconfirm" value="/resources/images/unconfirmed.png" style="float:center" rendered="#{PersonalizedTravelPackageWeb.checkStatus(element)==false}" />
				<p:tooltip for="Unconfirm" value="The component is not payed" showEffect="fade" hideEffect="fade" /> 
			</p:column>
				
			<p:column headerText="" style="text-align: center"> 
      			<p:row> 
      				<p:commandButton id="visualize" icon="ui-icon-script" rendered="#{PersonalizedTravelPackageWeb.checkRole()}" actionListener="#{PersonalizedTravelPackageWeb.showComponent(element)}"/> 
         			<p:commandButton id="delete" icon="ui-icon-trash" rendered="#{PersonalizedTravelPackageWeb.checkRole()}"  action="#{PersonalizedTravelPackageWeb.deleteComponent(element)}"/> 
            	</p:row>
            	<p:tooltip for="delete" value="Delete the component" showEffect="fade" hideEffect="fade" /> 
            	<p:tooltip for="visualize" value="View the details of the component" showEffect="fade" hideEffect="fade" />   
			</p:column> 				
		</p:dataTable>
		
		<p:commandButton id="link" icon="ui-icon-link" rendered="#{PersonalizedTravelPackageWeb.checkRole()==false}" actionListener="#{PersonalizedTravelPackageWeb.joinComponent(element)}"/> 
        <p:commandButton id="linktwo" icon="ui-icon-link" rendered="#{PersonalizedTravelPackageWeb.checkIfRegistered()}" actionListener="#{PersonalizedTravelPackageWeb.joinComponent(element)}"/>
		<p:commandButton value="Save" icon="ui-icon-check" style="float:right;" actionListener="#{PersonalizedTravelPackageWeb.saveChanges}" />
		
		<p:tooltip for="link" value="Join the package" showEffect="fade" hideEffect="fade" /> 
        <p:tooltip for="linktwo" value="Join the package" showEffect="fade" hideEffect="fade" /> 
        
	</h:form>
</ui:composition>
	